{"version":3,"sources":["components/Navbar.js","components/Chat.js","images/LogoB.png","components/Home.js","components/ClassItem.js","images/class.jpg","components/OrgContents.js","components/Organizations.js","components/VideoApp/settings.js","components/VideoApp/Video.js","components/VideoApp/Controls.js","components/VideoApp/VideoCall.js","components/VideoApp/VideoApp.js","components/Test.js","components/useAgora.tsx","components/MediaPlayer.tsx","components/Call.tsx","components/Login.js","images/emptyAvatar.png","images/mike.jpeg","components/StudentView.js","components/TeacherView.js","App.js","reportWebVitals.js","messaging.js","common.js","index.js"],"names":["Navbar","className","to","Chat","Home","observer","IntersectionObserver","entries","forEach","entry","console","log","isIntersecting","target","classList","add","remove","document","querySelectorAll","observe","src","LogoText","alt","style","fontSize","CardItem","props","href","path","label","text","Cards","ClassItem","img","Organizations","config","mode","codec","appId","token","useClient","createClient","useMicrophoneAndCameraTracks","createMicrophoneAndCameraTracks","channelName","Video","users","tracks","useState","gridSpacing","setGridSpacing","useEffect","Math","max","floor","length","Grid","container","height","item","xs","videoTrack","width","map","user","uid","Controls","client","setStart","setInCall","video","audio","trackState","setTrackState","mute","type","a","setEnabled","ps","leaveChannel","leave","removeAllListeners","close","onClick","VideoCall","setUsers","start","ready","init","name","on","mediaType","subscribe","prevUsers","audioTrack","play","stop","filter","User","joined","join","publish","error","VideoApp","inCall","Test","useAgora","undefined","localVideoTrack","setLocalVideoTrack","localAudioTrack","setLocalAudioTrack","joinState","setJoinState","remoteUsers","setRemoteUsers","createLocalTracks","audioConfig","videoConfig","AgoraRTC","microphoneTrack","cameraTrack","appid","channel","window","handleUserPublished","Array","from","handleUserUnpublished","handleUserJoined","handleUserLeft","off","MediaPlayer","useRef","current","ref","Call","setAppid","setToken","setChannel","onChange","event","value","id","disabled","Login","useForm","register","handleSubmit","result","setResult","onSubmit","data","JSON","stringify","placeholder","StudentView","history","useHistory","backgroundImage","mike","push","avatar","App","exact","TeacherView","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","RTMClient","channels","_logined","this","AgoraRTM","createInstance","subscribeClientEvents","eventName","args","emit","accountName","login","logout","createChannel","subscribeChannelEvents","sendMessage","peerId","sendMessageToPeer","toString","memberId","queryPeersOnlineStatus","blob","createMediaMessageByUploading","messageType","fileName","description","thumbnail","mediaMessage","message","controller","AbortController","setTimeout","abort","downloadMedia","mediaId","cancelSignal","signal","onOperationProgress","currentSize","totalSize","EventEmitter","Toastify","options","M","html","classes","Toast","msg","validator","formData","fields","Object","keys","key","indexOf","serializeFormData","domId","$","serializeArray","obj","val","blobToImage","cb","FileReader","readAsDataURL","onload","e","fileOrBlobToDataURL","dataurl","Image","imageToBlob","canvas","createElement","ctx","getContext","drawImage","imageToCanvas","arr","split","mime","match","bstr","atob","n","u8arr","Uint8Array","charCodeAt","Blob","dataURLToBlob","format","quality","toDataURL","canvasToDataURL","ReactDOM","render","StrictMode","getElementById","rtm","messagingClient","newState","reason","view","append","innerHTML","image","preventDefault","params","catch","err","joinChannel","sendChannelMessage","channelMessage","sendPeerMessage","peerMessage","res","attr","uploadImage","sendChannelMediaMessage"],"mappings":"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","file":"static/js/main.c8fe44c6.chunk.js","sourcesContent":["import { BrowserRouter as Router, Switch, Route, Link } from 'react-router-dom';\n\nexport function Navbar(){\n\n\n    return(\n        <div className=\"flex md:text-2xl text:lg justify-between bg-gradient-to-r from-yellow-400 to-yellow-100 \">\n        <div className=\" p-3 mx-2 justify-self-start transition duration-500 ease-in-out transform hover:-translate-y-1\">\n          <Link to=\"/\">Home</Link>\n        </div>\n        <div className=\"flex md:pr-3 \">\n          <div className=\" md:p-3 p-2 mx-2 transition duration-500 ease-in-out transform hover:-translate-y-1\">\n            <Link to=\"/chat\">Chat</Link>\n          </div>\n          <div className=\" md:p-3 p-2 mx-2 transition duration-500 ease-in-out transform hover:-translate-y-1\">\n            <Link to=\"/organizations\">Organizations</Link>\n          </div>\n          <div className=\" md:p-3 p-2 mx-2 transition duration-500 ease-in-out transform hover:-translate-y-1\">\n            <Link to=\"/call\">Call</Link>\n          </div>\n          <div className=\" md:p-3 p-2 mx-2 transition duration-500 ease-in-out transform hover:-translate-y-1\">\n            <Link to=\"/test\">Test</Link>\n          </div>\n          \n        </div>\n      </div>\n    )\n}\nexport default Navbar;","import React from \"react\";\nimport Navbar from './Navbar';\n\nfunction Chat(){\n    return(\n        <div>\n            <Navbar/>\n            <title>Blink - Intuitive Learning</title>\n            <h3> lol1 </h3>\n\n            <div className = \"bg-red-200\">\n                Hello World\n            </div>\n        </div>\n    )\n}\n\nexport default Chat;","export default __webpack_public_path__ + \"static/media/LogoB.5174b438.png\";","import React from \"react\";\nimport { Link } from 'react-router-dom';\nimport LogoText from \"../images/LogoB.png\";\nimport AttachMoneyIcon from '@mui/icons-material/AttachMoney';\nimport HelpOutlineIcon from '@mui/icons-material/HelpOutline';\nimport MailOutlineIcon from '@mui/icons-material/MailOutline';\nimport Navbar from './Navbar';\n\nfunction Home() {\n\n    const callback = function (entries) {\n        entries.forEach((entry) => {\n            console.log(entry);\n\n            if (entry.isIntersecting) {\n                entry.target.classList.add(\"animate-fadeIn\");\n            } else {\n                entry.target.classList.remove(\"animate-fadeIn\");\n            }\n        });\n    };\n\n    const observer = new IntersectionObserver(callback);\n\n    const targets = document.querySelectorAll(\".js-show-on-scroll\");\n    targets.forEach(function (target) {\n        target.classList.add(\"opacity-0\");\n        observer.observe(target);\n    });\n\n\n    return (\n        <div>\n            <Navbar/>\n            <title>Blink - Intuitive Learning</title>\n            <div className=\"h-screen bg-red-200\">\n                <div className=\"absolute top-4/10 left-1/2 transform -translate-x-1/4\">\n                    <img className=\"w-1/2\" src={LogoText} alt=\"Blink\" />\n                </div>\n                <Link to=\"/login\" className = \"absolute left-1/2 top-3/4 transform -translate-x-1/2 bg-blue-200 px-10 py-2 rounded-full text-2xl\">\n                    Login\n                </Link>\n            </div>\n            <div className=\"h-screen bg-gradient-to-b from-red-200 to-white flex flex-col items-center\">\n                <div className=\"mt-20 mb-10 text-4xl font-bold\"> About us</div>\n                <div className=\"bg-white h-1/2 w-2/4 rounded-lg shadow-lg transform hover:scale-110 duration-700 ease-in-out\">\n                    <div className=\"p-6 text-lg font-medium\">\n                        We are dedicated to bridging the gap between interactive learning and the online environment for students and teachers.\n                        Blink strives to promote an enganging setting that follows in-person learning through real-time interactive classroom activities.\n                        With a more connective present, the horizons of the future becomes limitless.\n                    </div>\n                    <div className=\"absolute bottom-0 bg-blue-100 w-full h-1/3 p-4 font-semibold\">\n                        \"Blink is the only application that scales on large classrooms. It's easy to adapt, improve, and design classroom environments.\"\n                        <div className=\"font-light text-sm text-red-500\">-Martha Excalibus</div>\n                        <div className=\"font-light text-sm\">Elementary School Teacher, Texas</div>\n                    </div>\n\n                </div>\n            </div>\n\n            <div className=\"h-screen flex justify-center flex-wrap\">\n                <div className=\"mt-20  text-4xl font-bold w-full text-center\"> Getting Started</div>\n                <div className=\"grid grid-cols-3 gap-4 h-3/5 w-1/2 text-2xl font-semibold\">\n                    <div className=\"rounded-xl bg-red-200 transform hover:skew-y-6 transition duration-300\">\n                        <div className=\"w-full h-1/6 bg-blue-100 rounded-t-xl flex justify-center items-center\">\n                            Discover\n                        </div>\n                        <div className=\"p-4 text-lg font-normal h-1/2\">\n                            Click here to view information on how to use Blink and its features more closely\n                        </div>\n                        <div className=\"w-full flex justify-center\">\n                            <HelpOutlineIcon style={{ fontSize: 150 }} />\n                        </div>\n                    </div>\n                    <div className=\"rounded-xl bg-red-200 transform hover:skew-y-6 transition duration-300\">\n                        <div className=\"w-full h-1/6 bg-blue-100 rounded-t-xl flex justify-center items-center\">\n                            Pricing\n                        </div>\n                        <div className=\"p-4 text-lg font-normal h-1/2\">\n                            Check out pricing options based on your needed level of classroom activity\n                        </div>\n                        <div className=\"w-full flex justify-center\">\n                            <AttachMoneyIcon style={{ fontSize: 150 }} />\n                        </div>\n                    </div>\n                    <div className=\"rounded-xl bg-red-200 transform hover:skew-y-6 transition duration-300\">\n                        <div className=\"w-full h-1/6 bg-blue-100 rounded-t-xl flex justify-center items-center\">\n                            Reach Out\n                        </div>\n                        <div className=\"p-4 text-lg font-normal h-1/2\">\n                            Feel free to send any questions our way using any form of communication. Click here for all the options\n                            to reach out.\n                        </div>\n                        <div className=\"w-full flex justify-center\">\n                            <MailOutlineIcon style={{ fontSize: 150 }} />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Home;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nfunction CardItem(props) {\n  return (\n    <>\n      <li className=\"cards__item\">\n        <a className=\"cards__item__link\" href={props.path} target=\"\">\n          <figure className=\"cards__item__pic-wrap\" data-category={props.label}>\n            <img\n              className=\"cards__item__img\"\n              alt=\"image\"\n              src={props.src}\n            />\n          </figure>\n          <div className=\"cards__item__info\">\n            <h5 className=\"cards__item__text\">{props.text}</h5>\n          </div>\n        </a>\n      </li>\n    </>\n  );\n}\n\nexport default CardItem;\n","export default __webpack_public_path__ + \"static/media/class.be3579b6.jpg\";","import React from \"react\";\nimport \"../styles/OrgContents.css\";\nimport ClassItem from \"./ClassItem\";\nimport img from \"../images/class.jpg\"\n\nfunction Cards() {\n  return (\n    <div className=\"cards h-screen\">\n      <title>Organizations</title>\n      <p>My classes</p>\n      <div className=\"cards__container\">\n        <div className=\"cards__wrapper\">\n          <ul className=\"cards__items\">\n            <ClassItem\n              src={img}\n              text=\"Mathematics / 11:30 - 12:30\"\n              label=\"Mrs. BJÖRKSNÄS\"\n              path=\"/studentview\"\n            />\n            <ClassItem\n              src={img}\n              text=\"Science / 1:00 - 2:00\"\n              label=\"Mr. FJÄDERMOLN\"\n              path=\"/studentview\"\n            />\n            <ClassItem\n              src={img}\n              text=\"English / 9:30 - 10:30\"\n              label=\"Mr. FRÖJERED\"\n              path=\"/studentview\"\n            />\n          </ul>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Cards;\n","import React from \"react\";\nimport Navbar from './Navbar';\nimport OrgContent from \"./OrgContents\";\n\nfunction Organizations() {\n    return (\n        <div>\n            <Navbar/>\n            <OrgContent />\n        </div>\n    )\n}\n\nexport default Organizations;","import { createClient, createMicrophoneAndCameraTracks } from \"agora-rtc-react\";\n\nconst appId = \"79bfd2935ce0436e83cd173585a8a29f\";\nconst token = \"00679bfd2935ce0436e83cd173585a8a29fIAC6laYYqcqc+1fZv7cyLN6U4S5BfsBQxV5ElM8eQ+2lL2TNKL8AAAAAEAApikci8zdaYQEAAQDzN1ph\";\n\nexport const config = { mode: \"rtc\", codec: \"vp8\", appId: appId, token: token };\nexport const useClient = createClient(config);\nexport const useMicrophoneAndCameraTracks = createMicrophoneAndCameraTracks();\nexport const channelName = \"main\";\n","import { AgoraVideoPlayer } from \"agora-rtc-react\";\nimport { Grid } from '@mui/material'\nimport { useState, useEffect } from \"react\";\n\nexport default function Video(props) {\n  const { users, tracks } = props;\n  const [gridSpacing, setGridSpacing] = useState(12);\n\n  useEffect(() => {\n    setGridSpacing(Math.max(Math.floor(12 / (users.length + 1)), 4));\n  }, [users, tracks]);\n\n   return (\n    <Grid container style={{ height: \"100%\" }}>\n      <Grid item xs={gridSpacing}>\n        <AgoraVideoPlayer\n          videoTrack={tracks[1]}\n          style={{ height: \"100%\", width: \"100%\" }}\n        />\n      </Grid>\n      {users.length > 0 &&\n        users.map((user) => {\n          if (user.videoTrack) {\n            return (\n              <Grid item xs={gridSpacing}\n                key={user.uid}\n                >\n                <AgoraVideoPlayer\n                  videoTrack={user.videoTrack}\n                  key={user.uid}\n                  style={{ height: \"100%\", width: \"100%\" }}\n                />\n              </Grid>\n            );\n          } else return null;\n        })}\n    </Grid>\n  );\n}","import { useState } from \"react\";\nimport { useClient } from \"./settings\";\nimport { Grid } from '@mui/material'\nimport MicIcon from '@mui/icons-material/Mic'\nimport MicOffIcon from '@mui/icons-material/MicOff'\nimport VideocamIcon from '@mui/icons-material/Videocam'\nimport VideocamOffIcon from '@mui/icons-material/VideocamOff'\nimport ExitToAppIcon from '@mui/icons-material/ExitToApp'\n\nexport default function Controls(props) {\n  const client = useClient();\n  const { tracks, setStart, setInCall } = props;\n  const [trackState, setTrackState] = useState({ video: true, audio: true });\n\n  const mute = async (type) => {\n    if (type === \"audio\") {\n      await tracks[0].setEnabled(!trackState.audio);\n      setTrackState((ps) => {\n        return { ...ps, audio: !ps.audio };\n      });\n    } else if (type === \"video\") {\n      await tracks[1].setEnabled(!trackState.video);\n      setTrackState((ps) => {\n        return { ...ps, video: !ps.video };\n      });\n    }\n  };\n\n  const leaveChannel = async () => {\n    await client.leave();\n    client.removeAllListeners();\n    tracks[0].close();\n    tracks[1].close();\n    setStart(false);\n    setInCall(false);\n  };\n\n  return (\n    <div className=\"flex justify-between border-black border-solid border-2 w-1/4\">\n      <button\n        onClick={() => mute(\"audio\")}\n      >\n        {trackState.audio ? <MicIcon /> : <MicOffIcon />}\n      </button>\n      <button\n        onClick={() => mute(\"video\")}\n      >\n        {trackState.video ? <VideocamIcon /> : <VideocamOffIcon />}\n      </button>\n      <button\n        onClick={() => leaveChannel()}\n      >\n        Leave\n        <ExitToAppIcon />\n      </button>\n    </div>\n  );\n}\n","import { useState, useEffect } from \"react\";\nimport {\n  config,\n  useClient,\n  useMicrophoneAndCameraTracks,\n  channelName,\n} from \"./settings.js\";\nimport { Grid } from '@mui/material'\nimport Video from \"./Video\";\nimport Controls from \"./Controls\";\n\nexport default function VideoCall(props) {\n  const { setInCall } = props;\n  const [users, setUsers] = useState([]);\n  const [start, setStart] = useState(false);\n  const client = useClient();\n  const { ready, tracks } = useMicrophoneAndCameraTracks();\n\n  useEffect(() => {\n    let init = async (name) => {\n\n      client.on(\"user-published\", async (user, mediaType) => {\n        await client.subscribe(user, mediaType);\n        if (mediaType === \"video\") {\n          setUsers((prevUsers) => {\n            return [...prevUsers, user];\n          });\n        }\n        if (mediaType === \"audio\") {\n          user.audioTrack.play();\n        }\n      });\n\n      client.on(\"user-unpublished\", (user, mediaType) => {\n        if (mediaType === \"audio\") {\n          if (user.audioTrack) user.audioTrack.stop();\n        }\n        if (mediaType === \"video\") {\n          setUsers((prevUsers) => {\n            return prevUsers.filter((User) => User.uid !== user.uid);\n          });\n        }\n      });\n\n      client.on(\"user-left\", (user) => {\n        setUsers((prevUsers) => {\n          return prevUsers.filter((User) => User.uid !== user.uid);\n        });\n      });\n\n      let joined = false\n      try {\n        await client.join(config.appId, name, config.token, null);\n        joined = true\n      } catch (error) {\n        console.log(error);\n      }\n\n      if (tracks && joined) await client.publish([tracks[0], tracks[1]]);\n      setStart(true);\n    };\n\n    if (ready && tracks) {\n      try {\n        init(channelName);\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  }, [channelName, client, ready, tracks]);\n\n  return (\n    <Grid container className=\"bg-pink-400 h-full\">\n\n      <Grid item className=\"bg-yellow-100 h-5/6 w-full\">\n        {start && tracks && <Video tracks={tracks} users={users} />}\n      </Grid>\n      <Grid item className=\"bg-yellow-100 h-1/6 w-full\">\n        {ready && tracks && (\n          <Controls tracks={tracks} setStart={setStart} setInCall={setInCall} />\n        )}\n      </Grid>\n    </Grid>\n  );\n}\n","import { useState } from \"react\";\nimport VideoCall from \"./VideoCall\";\n\nfunction VideoApp() {\n  const [inCall, setInCall] = useState(false);\n\n  return (\n    <div className=\"border-2 border-green-400 border-solid h-screen\">\n      {inCall ? (\n        <div className=\"h-full w-full\">\n          <VideoCall setInCall={setInCall} />\n        </div>\n      ) : (\n        <button onClick={() => setInCall(true)} className=\"bg-green-400 px-4 py-2 rounded\">\n          Join Call\n        </button>\n      )}\n    </div>\n  );\n}\n\nexport default VideoApp;\n","import React from \"react\";\nimport VideoApp from './VideoApp/VideoApp';\nimport Navbar from './Navbar';\n\n\n\nfunction Test() {\n    return (\n        <VideoApp></VideoApp>\n    )\n}\n\nexport default Test;","import { useState, useEffect } from 'react';\nimport AgoraRTC, {\n  IAgoraRTCClient, IAgoraRTCRemoteUser, MicrophoneAudioTrackInitConfig, CameraVideoTrackInitConfig, IMicrophoneAudioTrack, ICameraVideoTrack, ILocalVideoTrack, ILocalAudioTrack } from 'agora-rtc-sdk-ng';\n\nexport default function useAgora(client: IAgoraRTCClient | undefined)\n  :\n   {\n      localAudioTrack: ILocalAudioTrack | undefined,\n      localVideoTrack: ILocalVideoTrack | undefined,\n      joinState: boolean,\n      leave: Function,\n      join: Function,\n      remoteUsers: IAgoraRTCRemoteUser[],\n    }\n    {\n  const [localVideoTrack, setLocalVideoTrack] = useState<ILocalVideoTrack | undefined>(undefined);\n  const [localAudioTrack, setLocalAudioTrack] = useState<ILocalAudioTrack | undefined>(undefined);\n\n  const [joinState, setJoinState] = useState(false);\n\n  const [remoteUsers, setRemoteUsers] = useState<IAgoraRTCRemoteUser[]>([]);\n\n  async function createLocalTracks(audioConfig?: MicrophoneAudioTrackInitConfig, videoConfig?: CameraVideoTrackInitConfig)\n  : Promise<[IMicrophoneAudioTrack, ICameraVideoTrack]> {\n    const [microphoneTrack, cameraTrack] = await AgoraRTC.createMicrophoneAndCameraTracks(audioConfig, videoConfig);\n    setLocalAudioTrack(microphoneTrack);\n    setLocalVideoTrack(cameraTrack);\n    return [microphoneTrack, cameraTrack];\n  }\n\n  async function join(appid: string, channel: string, token?: string, uid?: string | number | null) {\n    if (!client) return;\n    const [microphoneTrack, cameraTrack] = await createLocalTracks();\n    \n    await client.join(appid, channel, token || null);\n    await client.publish([microphoneTrack, cameraTrack]);\n\n    (window as any).client = client;\n    (window as any).videoTrack = cameraTrack;\n\n    setJoinState(true);\n  }\n\n  async function leave() {\n    if (localAudioTrack) {\n      localAudioTrack.stop();\n      localAudioTrack.close();\n    }\n    if (localVideoTrack) {\n      localVideoTrack.stop();\n      localVideoTrack.close();\n    }\n    setRemoteUsers([]);\n    setJoinState(false);\n    await client?.leave();\n  }\n\n  useEffect(() => {\n    if (!client) return;\n    setRemoteUsers(client.remoteUsers);\n\n    const handleUserPublished = async (user: IAgoraRTCRemoteUser, mediaType: 'audio' | 'video') => {\n      await client.subscribe(user, mediaType);\n      // toggle rerender while state of remoteUsers changed.\n      setRemoteUsers(remoteUsers => Array.from(client.remoteUsers));\n    }\n    const handleUserUnpublished = (user: IAgoraRTCRemoteUser) => {\n      setRemoteUsers(remoteUsers => Array.from(client.remoteUsers));\n    }\n    const handleUserJoined = (user: IAgoraRTCRemoteUser) => {\n      setRemoteUsers(remoteUsers => Array.from(client.remoteUsers));\n    }\n    const handleUserLeft = (user: IAgoraRTCRemoteUser) => {\n      setRemoteUsers(remoteUsers => Array.from(client.remoteUsers));\n    }\n    client.on('user-published', handleUserPublished);\n    client.on('user-unpublished', handleUserUnpublished);\n    client.on('user-joined', handleUserJoined);\n    client.on('user-left', handleUserLeft);\n\n    return () => {\n      client.off('user-published', handleUserPublished);\n      client.off('user-unpublished', handleUserUnpublished);\n      client.off('user-joined', handleUserJoined);\n      client.off('user-left', handleUserLeft);\n    };\n  }, [client]);\n\n  return {\n    localAudioTrack,\n    localVideoTrack,\n    joinState,\n    leave,\n    join,\n    remoteUsers,\n  };\n}","import { ILocalVideoTrack, IRemoteVideoTrack, ILocalAudioTrack, IRemoteAudioTrack } from \"agora-rtc-sdk-ng\";\nimport React, { useRef, useEffect } from \"react\";\n\nexport interface VideoPlayerProps {\n  videoTrack: ILocalVideoTrack | IRemoteVideoTrack | undefined;\n  audioTrack: ILocalAudioTrack | IRemoteAudioTrack | undefined;\n}\n\nconst MediaPlayer = (props: VideoPlayerProps) => {\n  const container = useRef<HTMLDivElement>(null);\n  useEffect(() => {\n    if (!container.current) return;\n    props.videoTrack?.play(container.current);\n    return () => {\n      props.videoTrack?.stop();\n    };\n  }, [container, props.videoTrack]);\n  useEffect(() => {\n    if(props.audioTrack){\n      props.audioTrack?.play();\n    }\n    return () => {\n      props.audioTrack?.stop();\n    };\n  }, [props.audioTrack]);\n  return (\n    <div ref={container}  className=\"video-player\" style={{ width: \"320px\", height: \"240px\"}}></div>\n  );\n}\n\nexport default MediaPlayer;","import React, { useState } from 'react';\nimport AgoraRTC from 'agora-rtc-sdk-ng';\nimport useAgora from './useAgora';\nimport MediaPlayer from './MediaPlayer';\n\nconst client = AgoraRTC.createClient({ codec: 'h264', mode: 'rtc' });\n\nfunction Call() {\n  const [ appid, setAppid ] = useState('');\n  const [ token, setToken ] = useState('');\n  const [ channel, setChannel ] = useState('');\n  const {\n    localAudioTrack, localVideoTrack, leave, join, joinState, remoteUsers\n  } = useAgora(client);\n\n  return (\n    <div className='call'>\n      <form className='call-form'>\n        <label>\n          AppID:\n          <input type='text' name='appid' onChange={(event) => { setAppid(event.target.value) }}/>\n        </label>\n        <label>\n          Token(Optional):\n          <input type='text' name='token' onChange={(event) => { setToken(event.target.value) }} />\n        </label>\n        <label>\n          Channel:\n          <input type='text' name='channel' onChange={(event) => { setChannel(event.target.value) }} />\n        </label>\n        <div className='button-group'>\n          <button id='join' type='button' className='btn btn-primary btn-sm' disabled={joinState} onClick={() => {join(appid, channel, token)}}>Join</button>\n          <button id='leave' type='button' className='btn btn-primary btn-sm' disabled={!joinState} onClick={() => {leave()}}>Leave</button>\n        </div>\n      </form>\n      <div className='player-container'>\n        <div className='local-player-wrapper'>\n          <p className='local-player-text'>{localVideoTrack && `localTrack`}{joinState && localVideoTrack ? `(${client.uid})` : ''}</p>\n          <MediaPlayer videoTrack={localVideoTrack} audioTrack={undefined}></MediaPlayer>\n        </div>\n        {remoteUsers.map(user => (<div className='remote-player-wrapper' key={user.uid}>\n            <p className='remote-player-text'>{`remoteVideo(${user.uid})`}</p>\n            <MediaPlayer videoTrack={user.videoTrack} audioTrack={user.audioTrack}></MediaPlayer>\n          </div>))}\n      </div>\n    </div>\n  );\n}\n\nexport default Call;","import React from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useEffect, useState } from \"react\";\nimport { Link } from 'react-router-dom';\nimport Navbar from './Navbar';\nfunction Login() {\n    const { register, handleSubmit } = useForm();\n    const [result, setResult] = useState(\"\");\n    const onSubmit = (data) => setResult(JSON.stringify(data));\n    return (\n\n        <div>\n            <Navbar />\n            <div className=\"h-screen bg-red-200 flex justify-center items-center s\">\n                <div className=\"bg-white h-4/6 lg:w-1/4 w:1/2 rounded-2xl flex justify-center\">\n                    <div className=\"py-10 px-5\">\n                        <div className=\"text-3xl lg:text-5xl font-extrabold\">\n                            Login\n                        </div>\n                        <div className=\"text-s mt-2\">\n                            Please sign in to enter class\n                        </div>\n                        <form className=\"text-xl\" onSubmit={handleSubmit(onSubmit)}>\n                            <label>\n\n                                <br />\n                                <input className=\"border text-grey-darkest rounded-md mt-7 mb-5\"\n                                    {...register(\"username\")} placeholder=\"username\"\n                                />\n                            </label>\n                            <label>\n\n                                <br />\n                                <input className=\"border text-grey-darkest rounded-md mb-10\"\n                                    {...register(\"password\")} placeholder=\"password\"\n                                />\n                            </label>\n                            <p className=\"text-xs\">{result}</p>\n                            <Link to=\"/organizations\" className=\"bg-gradient-to-r from-yellow-200 to-yellow-400 rounded-2xl px-3 py-2\">Submit</Link>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Login;","export default __webpack_public_path__ + \"static/media/emptyAvatar.c3f94521.png\";","export default __webpack_public_path__ + \"static/media/mike.6a2ffcaa.jpeg\";","import React from \"react\";\nimport avatar from '../images/emptyAvatar.png';\nimport mike from '../images/mike.jpeg';\nimport { BrowserRouter as Router, Switch, Route, Link } from 'react-router-dom';\nimport { useState } from 'react';\nimport AgoraRTC from 'agora-rtc-sdk-ng';\nimport useAgora from './useAgora';\nimport MediaPlayer from './MediaPlayer';\nimport { useHistory } from \"react-router-dom\";\nimport { LocalCafe } from \"@mui/icons-material\";\n\nconst client = AgoraRTC.createClient({ codec: 'h264', mode: 'rtc' });\n\n\nexport function StudentView(){\n    const [ appid, setAppid ] = useState('');\n    const [ token, setToken ] = useState('');\n    const [ channel, setChannel ] = useState('');\n    const {\n        localAudioTrack, localVideoTrack, leave, join, joinState, remoteUsers\n    } = useAgora(client);\n\n    const history = useHistory();\n\n    const routeChange = () =>{ \n        let path = `organizations`; \n        localAudioTrack.close();\n        localVideoTrack.close();\n        history.push(path);\n    }\n\n    return(\n        <div className = \"flex flex-wrap flex-grow max-h-screen overflow-hidden\">\n\n            <section id=\"mainContent\" className=\"flex flex-wrap lg:w-4/5 w-3/4\">\n                \n                <div className=\"w-full h-4/5\">\n                    <div className=\"h-full bg-no-repeat bg-cover\"style={{ backgroundImage: `url(${mike})` }}>\n                        <div className='button-group'>\n                            <button id='join' type='button' className='px-3 py-2 bg-green-300 text-sm mx-4 mt-3 rounded-md'  disabled={joinState} onClick={() => {join(appid, channel, token)}}>Join</button>\n                            {/* <button id='leave' type='button' className='px-3 py-2 bg-red-400 text-sm mt-3 rounded-md' disabled={!joinState} onClick={() => {leave()}}>Leave</button> */}\n                            <button id='leave' type='button' className='px-3 py-2 bg-red-400 text-sm mt-3 rounded-md'  onClick={routeChange}>Leave</button>\n                            {/* <button id='leave' type='button' className=\"px-3 py-2 bg-red-400 text-sm mt-3 rounded-md\"> */}\n                                {/* <Link to=\"/organizations\">Leave</Link>\n                            </button> */}\n                        </div>\n                    </div>\n                    <div className='player-container'>\n                        <div className='local-player-wrapper absolute transform -translate-y-20 -translate-x-20 scale-75'>\n                        <p className='local-player-text'>{localVideoTrack && `localTrack`}{joinState && localVideoTrack ? `(${client.uid})` : ''}</p>\n                        <MediaPlayer videoTrack={localVideoTrack} audioTrack={undefined}></MediaPlayer>\n                        </div>\n                        {remoteUsers.map(user => (<div className='remote-player-wrapper' key={user.uid}>\n                            <p className='remote-player-text'>{`remoteVideo(${user.uid})`}</p>\n                            <MediaPlayer videoTrack={user.videoTrack} audioTrack={user.audioTrack}></MediaPlayer>\n                        </div>))}\n                    </div>\n                </div>\n                <div className=\"w-full h-1/5 bg-yellow-200 flex grid grid-cols-6\">\n                    <img className=\"object-scale-down\" src={avatar} alt=\"avatar\" />\n                    <img className=\"object-scale-down\" src={avatar} alt=\"avatar\" />\n                    <img className=\"object-scale-down\" src={avatar} alt=\"avatar\" />\n                    <img className=\"object-scale-down\" src={avatar} alt=\"avatar\" />\n                    <img className=\"object-scale-down\" src={avatar} alt=\"avatar\" />\n                    <img className=\"object-scale-down\" src={avatar} alt=\"avatar\" />\n                    {/* <img className=\"object-scale-down\" src={avatar} alt=\"avatar\" /> */}\n                    {/* <img className=\"object-scale-down\" src={avatar} alt=\"avatar\" /> */}\n                </div>\n            </section>\n\n            <section\n            id=\"ghost\"\n            className=\"flex justify-center h-screen sticky top-0 right-0 lg:w-1/5 w-1/4 bg-blue-200\"\n            ></section>\n\n            <section\n                id=\"Sidebar\"\n                className=\"flex justify-center items-end h-screen fixed top-0 right-0 border-l-2 border-gray-600 lg:w-1/5 w-1/4 text-xs lg:text-sm text-center\"\n            >\n                <form className = \"pb-4 w-full\">\n                    <input className = \"w-11/12 rounded-sm text-lg\"type=\"text\" placeholder=\"Message\"/>\n                </form>\n            </section>\n        </div>\n    )\n}\n\nexport default StudentView;","import React from \"react\";\nimport avatar from '../images/emptyAvatar.png';\nimport mike from '../images/mike.jpeg';\nimport { BrowserRouter as Router, Switch, Route, Link } from 'react-router-dom';\nimport { useState } from 'react';\nimport AgoraRTC from 'agora-rtc-sdk-ng';\nimport useAgora from './useAgora';\nimport MediaPlayer from './MediaPlayer';\nimport { useHistory } from \"react-router-dom\";\nimport { LocalCafe } from \"@mui/icons-material\";\n\nconst client = AgoraRTC.createClient({ codec: 'h264', mode: 'rtc' });\n\n\nexport function StudentView(){\n    const [ appid, setAppid ] = useState('');\n    const [ token, setToken ] = useState('');\n    const [ channel, setChannel ] = useState('');\n    const {\n        localAudioTrack, localVideoTrack, leave, join, joinState, remoteUsers\n    } = useAgora(client);\n\n    const history = useHistory();\n\n    const routeChange = () =>{ \n        let path = `organizations`; \n        localAudioTrack.close();\n        localVideoTrack.close();\n        history.push(path);\n    }\n\n    return(\n        <div className = \"flex flex-wrap flex-grow max-h-screen \">\n\n            <section id=\"mainContent\" className=\"flex flex-wrap lg:w-4/5 w-3/4\">\n                \n                <div className=\"w-full h-4/5\">\n                    <div className=\"h-full bg-no-repeat bg-cover\"style={{ backgroundImage: `url(${mike})` }}>\n                        <div className='button-group'>\n                            <button id='join' type='button' className='px-3 py-2 bg-green-300 text-sm mx-4 mt-3 rounded-md '  disabled={joinState} onClick={() => {join(appid, channel, token)}}>Join</button>\n                            {/* <button id='leave' type='button' className='px-3 py-2 bg-red-400 text-sm mt-3 rounded-md' disabled={!joinState} onClick={() => {leave()}}>Leave</button> */}\n                            <button id='leave' type='button' className='px-3 py-2 bg-red-400 text-sm mt-3 rounded-md '  onClick={routeChange}>Leave</button>\n                            {/* <button id='leave' type='button' className=\"px-3 py-2 bg-red-400 text-sm mt-3 rounded-md\"> */}\n                                {/* <Link to=\"/organizations\">Leave</Link>\n                            </button> */}\n                        </div>\n                    </div>\n                    <div className='player-container '>\n                        <div className='local-player-wrapper  scale-x-365 scale-y-275'>\n                        <p className='local-player-text'>{localVideoTrack && `localTrack`}{joinState && localVideoTrack ? `(${client.uid})` : ''}</p>\n                        <MediaPlayer videoTrack={localVideoTrack} audioTrack={undefined}></MediaPlayer>\n                        </div>\n                        {remoteUsers.map(user => (<div className='remote-player-wrapper' key={user.uid}>\n                            <p className='remote-player-text'>{`remoteVideo(${user.uid})`}</p>\n                            <MediaPlayer videoTrack={user.videoTrack} audioTrack={user.audioTrack}></MediaPlayer>\n                        </div>))}\n                    </div>\n                </div>\n                <div className=\"w-full h-1/5 bg-yellow-200 flex grid grid-cols-6\">\n                    <img className=\"object-scale-down\" src={avatar} alt=\"avatar\" />\n                    <img className=\"object-scale-down\" src={avatar} alt=\"avatar\" />\n                    <img className=\"object-scale-down\" src={avatar} alt=\"avatar\" />\n                    <img className=\"object-scale-down\" src={avatar} alt=\"avatar\" />\n                    <img className=\"object-scale-down\" src={avatar} alt=\"avatar\" />\n                    <img className=\"object-scale-down\" src={avatar} alt=\"avatar\" />\n                    {/* <img className=\"object-scale-down\" src={avatar} alt=\"avatar\" /> */}\n                    {/* <img className=\"object-scale-down\" src={avatar} alt=\"avatar\" /> */}\n                </div>\n            </section>\n\n            <section\n            id=\"ghost\"\n            className=\"flex justify-center h-screen sticky top-0 right-0 lg:w-1/5 w-1/4 bg-blue-200\"\n            ></section>\n\n            <section\n                id=\"Sidebar\"\n                className=\"flex justify-center items-end h-screen fixed top-0 right-0 border-l-2 border-gray-600 lg:w-1/5 w-1/4 text-xs lg:text-sm text-center\"\n            >\n                <form className = \"pb-4 w-full\">\n                    <input className = \"w-11/12 rounded-sm text-lg\"type=\"text\" placeholder=\"Message\"/>\n                </form>\n            </section>\n        </div>\n    )\n}\n\nexport default StudentView;","import React, { Component } from 'react';\nimport { BrowserRouter as Router, Switch, Route, Link } from 'react-router-dom';\n\nimport Chat from './components/Chat';\nimport Home from './components/Home';\nimport Organizations from './components/Organizations';\nimport Test from './components/Test';\nimport Call from './components/Call';\nimport Login from './components/Login';\nimport StudentView from './components/StudentView';\nimport TeacherView from './components/TeacherView';\n\n\nexport default function App() {\n  return (\n    <Router>\n      {/* <div className=\"flex text-2xl justify-between border-2 border-black border-solid\">\n        <div className=\"border-2 p-3 mx-2 justify-self-start\">\n          <Link to=\"/\">Home</Link>\n        </div>\n        <div className=\"flex\">\n          <div className=\"border-2 p-3 mx-2\">\n            <Link to=\"/chat\">Chat</Link>\n          </div>\n          <div className=\"border-2 p-3 mx-2\">\n            <Link to=\"/organizations\">Organizations</Link>\n          </div>\n          <div className=\"border-2 p-3 mx-2\">\n            <Link to=\"/call\">Call</Link>\n          </div>\n          <div className=\"border-2 p-3 mx-2\">\n            <Link to=\"/test\">Test</Link>\n          </div>\n          \n        </div>\n      </div> */}\n\n      <hr />\n\n      <Switch>\n        <Route exact path=\"/\">\n          <Home />\n        </Route>\n        <Route path=\"/chat\">\n          <Chat />\n        </Route>\n        <Route path=\"/organizations\">\n          <Organizations />\n        </Route>\n        <Route path=\"/call\">\n          <Call />\n        </Route>\n        <Route path=\"/test\">\n          <Test />\n        </Route>\n        <Route path=\"/login\">\n          <Login />\n        </Route>\n        <Route path=\"/studentview\">\n          <StudentView />\n        </Route>\n        <Route path=\"/teacherview\">\n          <TeacherView />\n        </Route>\n      </Switch>\n    </Router>\n  );\n}\n\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import AgoraRTM from 'agora-rtm-sdk'\nimport EventEmitter from 'events'\n\nexport default class RTMClient extends EventEmitter {\n  constructor () {\n    super()\n    this.channels = {}\n    this._logined = false\n  }\n\n  init (appId) {\n    this.client = AgoraRTM.createInstance(appId)\n    this.subscribeClientEvents()\n  }\n\n  // subscribe client events\n  subscribeClientEvents () {\n    const clientEvents = [\n      'ConnectionStateChanged',\n      'MessageFromPeer'\n    ]\n    clientEvents.forEach((eventName) => {\n      this.client.on(eventName, (...args) => {\n        console.log('emit ', eventName, ...args)\n        // log event message\n        this.emit(eventName, ...args)\n      })\n    })\n  }\n\n  // subscribe channel events\n  subscribeChannelEvents (channelName) {\n    const channelEvents = [\n      'ChannelMessage',\n      'MemberJoined',\n      'MemberLeft'\n    ]\n    channelEvents.forEach((eventName) => {\n      this.channels[channelName].channel.on(eventName, (...args) => {\n        console.log('emit ', eventName, args)\n        this.emit(eventName, { channelName, args: args })\n      })\n    })\n  }\n\n  async login (accountName, token) {\n    this.accountName = accountName\n    return this.client.login({ uid: this.accountName, token })\n  }\n\n  async logout () {\n    return this.client.logout()\n  }\n\n  async joinChannel (name) {\n    console.log('joinChannel', name)\n    const channel = this.client.createChannel(name)\n    this.channels[name] = {\n      channel,\n      joined: false // channel state\n    }\n    this.subscribeChannelEvents(name)\n    return channel.join()\n  }\n\n  async leaveChannel (name) {\n    console.log('leaveChannel', name)\n    if (!this.channels[name] ||\n      (this.channels[name] &&\n        !this.channels[name].joined)) return\n    return this.channels[name].channel.leave()\n  }\n\n  async sendChannelMessage (text, channelName) {\n    if (!this.channels[channelName] || !this.channels[channelName].joined) return\n    return this.channels[channelName].channel.sendMessage({ text })\n  }\n\n  async sendPeerMessage (text, peerId) {\n    console.log('sendPeerMessage', text, peerId)\n    return this.client.sendMessageToPeer({ text }, peerId.toString())\n  }\n\n  async queryPeersOnlineStatus (memberId) {\n    console.log('queryPeersOnlineStatus', memberId)\n    return this.client.queryPeersOnlineStatus([memberId])\n  }\n\n  //send image\n  async uploadImage (blob, peerId) {\n    const mediaMessage = await this.client.createMediaMessageByUploading(blob, {\n      messageType: 'IMAGE',\n      fileName: 'agora.jpg',\n      description: 'send image',\n      thumbnail: blob, \n      // width: 100,\n      // height: 200,\n      // thumbnailWidth: 50,\n      // thumbnailHeight: 200, \n    }) \n    return this.client.sendMessageToPeer(mediaMessage, peerId)\n  }\n\n  async sendChannelMediaMessage (blob, channelName) {\n    console.log('sendChannelMessage', blob, channelName)\n    if (!this.channels[channelName] || !this.channels[channelName].joined) return\n    const mediaMessage = await this.client.createMediaMessageByUploading(blob, {\n      messageType: 'IMAGE',\n      fileName: 'agora.jpg',\n      description: 'send image',\n      thumbnail: blob, \n      // width: 100,\n      // height: 200,\n      // thumbnailWidth: 50,\n      // thumbnailHeight: 200, \n    }) \n    return this.channels[channelName].channel.sendMessage(mediaMessage)\n  }\n\n  async cancelImage (message) {\n    const controller = new AbortController()\n    setTimeout(() => controller.abort(), 1000)\n    await this.client.downloadMedia(message.mediaId, {\n      cancelSignal: controller.signal,\n      onOperationProgress: ({currentSize, totalSize}) => {\n        console.log(currentSize, totalSize)\n      },\n    })\n  }\n\n}","import * as M from 'materialize-css'\nimport * as $ from 'jquery'\n\nfunction Toastify (options) {\n  M.toast({ html: options.text, classes: options.classes })\n}\n\nexport const Toast = {\n  info: (msg) => {\n    Toastify({\n      text: msg,\n      classes: 'info-toast'\n    })\n  },\n  notice: (msg) => {\n    Toastify({\n      text: msg,\n      classes: 'notice-toast'\n    })\n  },\n  error: (msg) => {\n    Toastify({\n      text: msg,\n      classes: 'error-toast'\n    })\n  }\n}\n\nexport function validator (formData, fields) {\n  const keys = Object.keys(formData)\n  for (const key of keys) {\n    if (fields.indexOf(key) !== -1) {\n      if (!formData[key]) {\n        Toast.error('Please Enter ' + key)\n        return false\n      }\n    }\n  }\n  return true\n}\n\nexport function serializeFormData (domId) {\n  const formData = $('#' + domId).serializeArray()\n  const obj = {}\n  for (var item of formData) {\n    var key = item.name\n    var val = item.value\n    obj[key] = val\n  }\n  console.log('form data', obj)\n  return obj\n}\n\n// export function makeBlobByFetch (src) {\n//   return fetch(src).then(res => {\n//     const blob = res.blob()\n//     return blob\n//   })\n// }\n  \nexport function canvasToDataURL (canvas, format, quality) {\n  return canvas.toDataURL(format||'image/jpeg', quality||1.0)\n}\n\nexport function dataURLToBlob(dataurl){\n  var arr = dataurl.split(',')\n  var mime = arr[0].match(/:(.*?);/)[1]\n  var bstr = atob(arr[1])\n  var n = bstr.length\n  var u8arr = new Uint8Array(n)\n  while(n--){\n    u8arr[n] = bstr.charCodeAt(n)\n  }\n  return new Blob([u8arr], {type:mime})\n}\n\nexport function imageToCanvas(src, cb){\n  var canvas = document.createElement('CANVAS')\n  var ctx = canvas.getContext('2d')\n  var img = new Image()\n  img.src = src\n  img.onload = function (){\n    canvas.width = img.width\n    canvas.height = img.height\n    ctx.drawImage(img, 0, 0)\n    cb(canvas)\n  }\n}\n\nexport function fileOrBlobToDataURL(obj, cb){\n  var a = new FileReader()\n  a.readAsDataURL(obj)\n  a.onload = function (e){\n    cb(e.target.result)\n  }\n}\n\n//Blob 转 image\nexport function blobToImage (blob, cb) {\n  fileOrBlobToDataURL(blob, function (dataurl){\n    var img = new Image()\n    img.src = dataurl\n    cb(img)\n  })\n}\n\n//image 转 Blob\nexport function imageToBlob(src, cb){\n  imageToCanvas(src, function (canvas){\n    cb(dataURLToBlob(canvasToDataURL(canvas)))\n  })\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport * as $ from 'jquery'\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nimport messagingClient from './messaging'\nimport {\n  Toast,\n  validator,\n  serializeFormData,\n  imageToBlob,\n  blobToImage\n} from './common'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n\n$(() => {\n  const rtm = new messagingClient()\n\n  rtm.on('ConnectionStateChanged', (newState, reason) => {\n    console.log('reason', reason)\n    const view = $('<div/>', {\n      text: ['newState: ' + newState, ', reason: ', reason].join('')\n    })\n    $('#log').append(view)\n    if (newState === 'ABORTED') {\n      if (reason === 'REMOTE_LOGIN') {\n        Toast.error('You have already been kicked off!')\n        $('#accountName').text('Agora Chatroom')\n\n        $('#dialogue-list')[0].innerHTML = ''\n        $('#chat-message')[0].innerHTML = ''\n      }\n    }\n  })\n\n  rtm.on('MessageFromPeer', async (message, peerId) => {\n    if (message.messageType === 'IMAGE') {\n      const blob = await rtm.client.downloadMedia(message.mediaId)\n      blobToImage(blob, (image) => {\n        const view = $('<div/>', {\n          text: [' peer: ', peerId].join('')\n        })\n        $('#log').append(view)\n        $('#log').append(`<img src= '${image.src}'/>`)\n      })\n    } else {\n      console.log('message ' + message.text + ' peerId' + peerId)\n      const view = $('<div/>', {\n        text: ['message.text: ' + message.text, ', peer: ', peerId].join('')\n      })\n      $('#log').append(view)\n    } \n\n  })\n\n  rtm.on('MemberJoined', ({ channelName, args }) => {\n    const memberId = args[0]\n    console.log('channel ', channelName, ' member: ', memberId, ' joined')\n    const view = $('<div/>', {\n      text: ['event: MemberJoined ', ', channel: ', channelName, ', memberId: ', memberId].join('')\n    })\n    $('#log').append(view)\n  })\n\n  rtm.on('MemberLeft', ({ channelName, args }) => {\n    const memberId = args[0]\n    console.log('channel ', channelName, ' member: ', memberId, ' joined')\n    const view = $('<div/>', {\n      text: ['event: MemberLeft ', ', channel: ', channelName, ', memberId: ', memberId].join('')\n    })\n    $('#log').append(view)\n  })\n\n  rtm.on('ChannelMessage', async ({ channelName, args }) => {\n    const [message, memberId] = args\n    if (message.messageType === 'IMAGE') {\n      const blob = await rtm.client.downloadMedia(message.mediaId)\n      blobToImage(blob, (image) => {\n        const view = $('<div/>', {\n          text: ['event: ChannelMessage ', 'channel: ', channelName, ' memberId: ', memberId].join('')\n        })\n        $('#log').append(view)\n        $('#log').append(`<img src= '${image.src}'/>`)\n      })\n    } else {\n      console.log('channel ', channelName, ', messsage: ', message.text, ', memberId: ', memberId)\n      const view = $('<div/>', {\n        text: ['event: ChannelMessage ', 'channel: ', channelName, ', message: ', message.text, ', memberId: ', memberId].join('')\n      })\n      $('#log').append(view)\n    }  \n  })\n\n  $('#login').on('click', function (e) {\n    e.preventDefault()\n\n    if (rtm._logined) {\n      Toast.error('You already logined')\n      return\n    }\n\n    const params = serializeFormData('loginForm')\n\n    if (!validator(params, ['appId', 'accountName'])) {\n      return\n    }\n\n    try {\n      rtm.init(params.appId)\n      window.rtm = rtm\n      rtm.login(params.accountName, params.token).then(() => {\n        console.log('login')\n        rtm._logined = true\n        Toast.notice('Login: ' + params.accountName, ' token: ', params.token)\n      }).catch((err) => {\n        console.log(err)\n      })\n    } catch (err) {\n      Toast.error('Login failed, please open console see more details')\n      console.error(err)\n    }\n  })\n\n  $('#logout').on('click', function (e) {\n    e.preventDefault()\n    if (!rtm._logined) {\n      Toast.error('You already logout')\n      return\n    }\n    rtm.logout().then(() => {\n      console.log('logout')\n      rtm._logined = false\n      Toast.notice('Logout: ' + rtm.accountName)\n    }).catch((err) => {\n      Toast.error('Logout failed, please open console see more details')\n      console.log(err)\n    })\n  })\n\n  $('#join').on('click', function (e) {\n    e.preventDefault()\n    if (!rtm._logined) {\n      Toast.error('Please Login First')\n      return\n    }\n\n    const params = serializeFormData('loginForm')\n\n    if (!validator(params, ['appId', 'accountName', 'channelName'])) {\n      return\n    }\n\n    if (rtm.channels[params.channelName] ||\n        (rtm.channels[params.channelName] && rtm.channels[params.channelName].joined)) {\n      Toast.error('You already joined')\n      return\n    }\n\n    rtm.joinChannel(params.channelName).then(() => {\n      const view = $('<div/>', {\n        text: rtm.accountName + ' join channel success'\n      })\n      $('#log').append(view)\n      rtm.channels[params.channelName].joined = true\n    }).catch((err) => {\n      Toast.error('Join channel failed, please open console see more details.')\n      console.error(err)\n    })\n  })\n\n  $('#leave').on('click', function (e) {\n    e.preventDefault()\n    if (!rtm._logined) {\n      Toast.error('Please Login First')\n      return\n    }\n\n    const params = serializeFormData('loginForm')\n\n    if (!validator(params, ['appId', 'accountName', 'channelName'])) {\n      return\n    }\n\n    if (!rtm.channels[params.channelName] ||\n      (rtm.channels[params.channelName] && !rtm.channels[params.channelName].joined)\n    ) {\n      Toast.error('You already leave')\n    }\n\n    rtm.leaveChannel(params.channelName).then(() => {\n      const view = $('<div/>', {\n        text: rtm.accountName + ' leave channel success'\n      })\n      $('#log').append(view)\n      if (rtm.channels[params.channelName]) {\n        rtm.channels[params.channelName].joined = false\n        rtm.channels[params.channelName] = null\n      }\n    }).catch((err) => {\n      Toast.error('Leave channel failed, please open console see more details.')\n      console.error(err)\n    })\n  })\n\n  $('#send_channel_message').on('click', function (e) {\n    e.preventDefault()\n    if (!rtm._logined) {\n      Toast.error('Please Login First')\n      return\n    }\n\n    const params = serializeFormData('loginForm')\n\n    if (!validator(params, ['appId', 'accountName', 'channelName', 'channelMessage'])) {\n      return\n    }\n\n    if (!rtm.channels[params.channelName] ||\n      (rtm.channels[params.channelName] && !rtm.channels[params.channelName].joined)\n    ) {\n      Toast.error('Please Join first')\n    }\n\n    rtm.sendChannelMessage(params.channelMessage, params.channelName).then(() => {\n      const view = $('<div/>', {\n        text: 'account: ' + rtm.accountName + ' send : ' + params.channelMessage + ' channel: ' + params.channelName\n      })\n      $('#log').append(view)\n    }).catch((err) => {\n      Toast.error('Send message to channel ' + params.channelName + ' failed, please open console see more details.')\n      console.error(err)\n    })\n  })\n\n  $('#send_peer_message').on('click', function (e) {\n    e.preventDefault()\n    if (!rtm._logined) {\n      Toast.error('Please Login First')\n      return\n    }\n\n    const params = serializeFormData('loginForm')\n\n    if (!validator(params, ['appId', 'accountName', 'peerId', 'peerMessage'])) {\n      return\n    }\n\n    rtm.sendPeerMessage(params.peerMessage, params.peerId).then(() => {\n      const view = $('<div/>', {\n        text: 'account: ' + rtm.accountName + ' send : ' + params.peerMessage + ' peerId: ' + params.peerId\n      })\n      $('#log').append(view)\n    }).catch((err) => {\n      Toast.error('Send message to peer ' + params.peerId + ' failed, please open console see more details.')\n      console.error(err)\n    })\n  })\n\n  $('#query_peer').on('click', function (e) {\n    e.preventDefault()\n    if (!rtm._logined) {\n      Toast.error('Please Login First')\n      return\n    }\n\n    const params = serializeFormData('loginForm')\n\n    if (!validator(params, ['appId', 'accountName', 'memberId'])) {\n      return\n    }\n\n    rtm.queryPeersOnlineStatus(params.memberId).then((res) => {\n      const view = $('<div/>', {\n        text: 'memberId: ' + params.memberId + ', online: ' + res[params.memberId]\n      })\n      $('#log').append(view)\n    }).catch((err) => {\n      Toast.error('query peer online status failed, please open console see more details.')\n      console.error(err)\n    })\n  })\n\n  $('#send-image').on('click', async function (e) {\n    e.preventDefault()\n    const params = serializeFormData('loginForm')\n\n    if (!validator(params, ['appId', 'accountName', 'peerId'])) {\n      return\n    }\n    const src = $('img').attr('src')\n    imageToBlob(src, (blob) => {\n      rtm.uploadImage(blob, params.peerId)\n    })\n    \n  })\n\n  $('#send-channel-image').on('click', async function (e) {\n    e.preventDefault()\n    const params = serializeFormData('loginForm')\n\n    if (!validator(params, ['appId', 'accountName', 'channelName'])) {\n      return\n    }\n    const src = $('img').attr('src')\n    imageToBlob(src, (blob) => {\n      rtm.sendChannelMediaMessage(blob, params.channelName).then(() => {\n        const view = $('<div/>', {\n          text: 'account: ' + rtm.accountName  + ' channel: ' + params.channelName\n        })\n        $('#log').append(view)\n        $('#log').append(`<img src= '${src}'/>`)\n      }).catch((err) => {\n        Toast.error('Send message to channel ' + params.channelName + ' failed, please open console see more details.')\n        console.error(err)\n      })\n    })  \n  })\n})"],"sourceRoot":""}